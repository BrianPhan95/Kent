function splitLines(n){return n.split(/\r\n?|\n/)}function StringStream(n,t){this.pos=this.start=0;this.string=n;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0}function copyObj(n,t,i){t||(t={});for(var r in n)n.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=n[r]);return t}var countColumn=function(n,t,i,r,u){var f,e,o;for(t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length)),f=r||0,e=u||0;;){if(o=n.indexOf("\t",f),o<0||o>=t)return e+(t-f);e+=o-f;e+=i-e%i;f=o+1}},modes,mimeModes,modeExtensions;StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(n){var t=this.string.charAt(this.pos),i;return i=typeof n=="string"?t==n:t&&(n.test?n.test(t):n(t)),i?(++this.pos,t):void 0},eatWhile:function(n){for(var t=this.pos;this.eat(n););return this.pos>t},eatSpace:function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},skipToEnd:function(){this.pos=this.string.length},skipTo:function(n){var t=this.string.indexOf(n,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(n){this.pos-=n},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(n,t,i){var u,f,r;if(typeof n=="string"){if(u=function(n){return i?n.toLowerCase():n},f=this.string.substr(this.pos,n.length),u(f)==u(n))return t!==!1&&(this.pos+=n.length),!0}else return(r=this.string.slice(this.pos).match(n),r&&r.index>0)?null:(r&&t!==!1&&(this.pos+=r[0].length),r)},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(n,t){this.lineStart+=n;try{return t()}finally{this.lineStart-=n}}};exports.StringStream=StringStream;exports.startState=function(n,t,i){return n.startState?n.startState(t,i):!0};modes=exports.modes={};mimeModes=exports.mimeModes={};exports.defineMode=function(n,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2));modes[n]=t};exports.defineMIME=function(n,t){mimeModes[n]=t};exports.defineMode("null",function(){return{token:function(n){n.skipToEnd()}}});exports.defineMIME("text/plain","null");exports.resolveMode=function(n){return typeof n=="string"&&mimeModes.hasOwnProperty(n)?n=mimeModes[n]:n&&typeof n.name=="string"&&mimeModes.hasOwnProperty(n.name)&&(n=mimeModes[n.name]),typeof n=="string"?{name:n}:n||{name:"null"}};modeExtensions=exports.modeExtensions={};exports.extendMode=function(n,t){var i=modeExtensions.hasOwnProperty(n)?modeExtensions[n]:modeExtensions[n]={};copyObj(t,i)};exports.getMode=function(n,t){var t=exports.resolveMode(t),f=modes[t.name],r,u,i;if(!f)return exports.getMode(n,"text/plain");if(r=f(n,t),modeExtensions.hasOwnProperty(t.name)){u=modeExtensions[t.name];for(i in u)u.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&(r["_"+i]=r[i]),r[i]=u[i])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(i in t.modeProps)r[i]=t.modeProps[i];return r};exports.registerHelper=exports.registerGlobalHelper=Math.min;exports.runMode=function(n,t,i,r){for(var u,h,e=exports.getMode({indentUnit:2},t),s=splitLines(n),o=r&&r.state||exports.startState(e),f=0,c=s.length;f<c;++f)for(f&&i("\n"),u=new exports.StringStream(s[f]),!u.string&&e.blankLine&&e.blankLine(o);!u.eol();)h=e.token(u,o),i(u.current(),h,f,u.start,o),u.start=u.pos};require.cache[require.resolve("../../lib/codemirror")]=require.cache[require.resolve("./runmode.node")];require.cache[require.resolve("../../addon/runmode/runmode")]=require.cache[require.resolve("./runmode.node")];
//# sourceMappingURL=runmode.node.min.js.map
