(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function r(n,t,i){for(var e,u,s,r,o=i.paragraphStart||n.getHelper(t,"paragraphStart"),f=t.line,h=n.firstLine();f>h;--f){if(r=n.getLine(f),o&&o.test(r))break;if(!/\S/.test(r)){++f;break}}for(e=i.paragraphEnd||n.getHelper(t,"paragraphEnd"),u=t.line+1,s=n.lastLine();u<=s;++u){if(r=n.getLine(u),e&&e.test(r)){++u;break}if(!/\S/.test(r))break}return{from:f,to:u}}function u(n,t,i,r){for(var e,f,u=t;u>0;--u)if(i.test(n.slice(u-1,u+1)))break;for(e=!0;;e=!1){if(f=u,r)while(n.charAt(f-1)==" ")--f;if(f==0&&e)u=t;else return{from:f,to:u}}}function i(i,r,f,e){var a,l,v,w,b;r=i.clipPos(r);f=i.clipPos(f);var y=e.column||80,k=e.wrapOn||/\s\S|-[^\.\d]/,nt=e.killTrailingSpace!==!1,s=[],o="",c=r.line,p=i.getRange(r,f,!1);if(!p.length)return null;for(a=p[0].match(/^[ \t]*/)[0],l=0;l<p.length;++l){var h=p[l],d=o.length,g=0;for(o&&h&&!k.test(o.charAt(o.length-1)+h.charAt(0))&&(o+=" ",g=1),v="",l&&(v=h.match(/^\s*/)[0],h=h.slice(v.length)),o+=h,l&&(w=o.length>y&&a==v&&u(o,y,k,nt),w&&w.from==d&&w.to==d+g?(o=a+h,++c):s.push({text:[g?" ":""],from:t(c,d),to:t(c+1,v.length)}));o.length>y;)b=u(o,y,k,nt),s.push({text:["",a],from:t(c,b.from),to:t(c,b.to)}),o=a+o.slice(b.to),++c}return s.length&&i.operation(function(){for(var t,r=0;r<s.length;++r)t=s[r],(t.text||n.cmpPos(t.from,t.to))&&i.replaceRange(t.text,t.from,t.to)}),s.length?{from:s[0].from,to:n.changeEnd(s[s.length-1])}:null}var t=n.Pos;n.defineExtension("wrapParagraph",function(n,u){u=u||{};n||(n=this.getCursor());var f=r(this,n,u);return i(this,t(f.from,0),t(f.to-1),u)});n.commands.wrapLines=function(n){n.operation(function(){for(var f,u,o,s=n.listSelections(),h=n.lastLine()+1,e=s.length-1;e>=0;e--)(f=s[e],f.empty()?(o=r(n,f.head,{}),u={from:t(o.from,0),to:t(o.to-1)}):u={from:f.from(),to:f.to()},u.to.line>=h)||(h=u.from.line,i(n,u.from,u.to,{}))})};n.defineExtension("wrapRange",function(n,t,r){return i(this,n,t,r||{})});n.defineExtension("wrapParagraphsInRange",function(n,u,f){var o,e,s,c,h;for(f=f||{},o=this,e=[],s=n.line;s<=u.line;)c=r(o,t(s,0),f),e.push(c),s=c.to;return h=!1,e.length&&o.operation(function(){for(var n=e.length-1;n>=0;--n)h=h||i(o,t(e[n].from,0),t(e[n].to-1),f)}),h})});
//# sourceMappingURL=hardwrap.min.js.map
