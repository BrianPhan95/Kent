(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay")):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("django:inner",function(){function t(n,t){if(n.match("{{"))return t.tokenize=e,"tag";if(n.match("{%"))return t.tokenize=f,"tag";if(n.match("{#"))return t.tokenize=o,"comment";while(n.next()!=null&&!n.match("{{",!1)&&!n.match("{%",!1));return null}function i(n,t){return function(i,r){if(!r.escapeNext&&i.eat(n))r.tokenize=t;else{r.escapeNext&&(r.escapeNext=!1);var u=i.next();u=="\\"&&(r.escapeNext=!0)}return"string"}}function e(r,u){if(u.waitDot){if(u.waitDot=!1,r.peek()!=".")return"null";if(r.match(/\.\W+/))return"error";if(r.eat("."))return u.waitProperty=!0,"null";throw Error("Unexpected error while waiting for property.");}if(u.waitPipe){if(u.waitPipe=!1,r.peek()!="|")return"null";if(r.match(/\.\W+/))return"error";if(r.eat("|"))return u.waitFilter=!0,"null";throw Error("Unexpected error while waiting for filter.");}return u.waitProperty&&(u.waitProperty=!1,r.match(/\b(\w+)\b/))?(u.waitDot=!0,u.waitPipe=!0,"property"):u.waitFilter&&(u.waitFilter=!1,r.match(n))?"variable-2":r.eatSpace()?(u.waitProperty=!1,"null"):r.match(/\b\d+(\.\d+)?\b/)?"number":r.match("'")?(u.tokenize=i("'",u.tokenize),"string"):r.match('"')?(u.tokenize=i('"',u.tokenize),"string"):r.match(/\b(\w+)\b/)&&!u.foundVariable?(u.waitDot=!0,u.waitPipe=!0,"variable"):r.match("}}")?(u.waitProperty=null,u.waitFilter=null,u.waitDot=null,u.waitPipe=null,u.tokenize=t,"tag"):(r.next(),"null")}function f(f,e){if(e.waitDot){if(e.waitDot=!1,f.peek()!=".")return"null";if(f.match(/\.\W+/))return"error";if(f.eat("."))return e.waitProperty=!0,"null";throw Error("Unexpected error while waiting for property.");}if(e.waitPipe){if(e.waitPipe=!1,f.peek()!="|")return"null";if(f.match(/\.\W+/))return"error";if(f.eat("|"))return e.waitFilter=!0,"null";throw Error("Unexpected error while waiting for filter.");}if(e.waitProperty&&(e.waitProperty=!1,f.match(/\b(\w+)\b/)))return e.waitDot=!0,e.waitPipe=!0,"property";if(e.waitFilter&&(e.waitFilter=!1,f.match(n)))return"variable-2";if(f.eatSpace())return e.waitProperty=!1,"null";if(f.match(/\b\d+(\.\d+)?\b/))return"number";if(f.match("'"))return e.tokenize=i("'",e.tokenize),"string";if(f.match('"'))return e.tokenize=i('"',e.tokenize),"string";if(f.match(u))return"operator";var o=f.match(r);return o?(o[0]=="comment"&&(e.blockCommentTag=!0),"keyword"):f.match(/\b(\w+)\b/)?(e.waitDot=!0,e.waitPipe=!0,"variable"):f.match("%}")?(e.waitProperty=null,e.waitFilter=null,e.waitDot=null,e.waitPipe=null,e.blockCommentTag?(e.blockCommentTag=!1,e.tokenize=s):e.tokenize=t,"tag"):(f.next(),"null")}function o(n,i){return n.match("#}")&&(i.tokenize=t),"comment"}function s(n,t){return n.match(/\{%\s*endcomment\s*%\}/,!1)?(t.tokenize=f,n.match("{%"),"tag"):(n.next(),"comment")}var r=["block","endblock","for","endfor","true","false","filter","endfilter","loop","none","self","super","if","elif","endif","as","else","import","with","endwith","without","context","ifequal","endifequal","ifnotequal","endifnotequal","extends","include","load","comment","endcomment","empty","url","static","trans","blocktrans","endblocktrans","now","regroup","lorem","ifchanged","endifchanged","firstof","debug","cycle","csrf_token","autoescape","endautoescape","spaceless","endspaceless","ssi","templatetag","verbatim","endverbatim","widthratio"],n=["add","addslashes","capfirst","center","cut","date","default","default_if_none","dictsort","dictsortreversed","divisibleby","escape","escapejs","filesizeformat","first","floatformat","force_escape","get_digit","iriencode","join","last","length","length_is","linebreaks","linebreaksbr","linenumbers","ljust","lower","make_list","phone2numeric","pluralize","pprint","random","removetags","rjust","safe","safeseq","slice","slugify","stringformat","striptags","time","timesince","timeuntil","title","truncatechars","truncatechars_html","truncatewords","truncatewords_html","unordered_list","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap","yesno"],u=["==","!=","<",">","<=",">=","in","not","or","and"];return r=new RegExp("^\\b("+r.join("|")+")\\b"),n=new RegExp("^\\b("+n.join("|")+")\\b"),u=new RegExp("^\\b("+u.join("|")+")\\b"),{startState:function(){return{tokenize:t}},token:function(n,t){return t.tokenize(n,t)},blockCommentStart:"{% comment %}",blockCommentEnd:"{% endcomment %}"}});n.defineMode("django",function(t){var i=n.getMode(t,"text/html"),r=n.getMode(t,"django:inner");return n.overlayMode(i,r)});n.defineMIME("text/x-django","django")});
//# sourceMappingURL=django.min.js.map
