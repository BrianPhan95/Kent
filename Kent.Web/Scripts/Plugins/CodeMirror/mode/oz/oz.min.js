(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("oz",function(n){function i(n){return new RegExp("^(("+n.join(")|(")+"))\\b")}function t(n,t){var r,i;if(n.eatSpace())return null;if(n.match(/[{}]/))return"bracket";if(n.match(/(\[])/))return"keyword";if(n.match(c)||n.match(h))return"operator";if(n.match(l))return"atom";if(r=n.match(v),r)return t.doInCurrentLine?t.doInCurrentLine=!1:t.currentIndent++,r[0]=="proc"||r[0]=="fun"?t.tokenize=w:r[0]=="class"?t.tokenize=y:r[0]=="meth"&&(t.tokenize=p),"keyword";if(n.match(f)||n.match(a))return"keyword";if(n.match(e))return t.currentIndent--,"keyword";if(i=n.next(),i=='"'||i=="'")return t.tokenize=b(i),t.tokenize(n,t);if(/[~\d]/.test(i)){if(i=="~")if(/^[0-9]/.test(n.peek())){if(n.next()=="0"&&n.match(/^[xX][0-9a-fA-F]+/)||n.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/))return"number"}else return null;return i=="0"&&n.match(/^[xX][0-9a-fA-F]+/)||n.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/)?"number":null}return i=="%"?(n.skipToEnd(),"comment"):i=="/"&&n.eat("*")?(t.tokenize=o,o(n,t)):s.test(i)?"operator":(n.eatWhile(/\w/),"variable")}function y(n,i){return n.eatSpace()?null:(n.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)/),i.tokenize=t,"variable-3")}function p(n,i){return n.eatSpace()?null:(n.match(/([a-zA-Z][A-Za-z0-9_]*)|(`.+`)/),i.tokenize=t,"def")}function w(n,i){return n.eatSpace()?null:!i.hasPassedFirstStage&&n.eat("{")?(i.hasPassedFirstStage=!0,"bracket"):i.hasPassedFirstStage?(n.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)|\$/),i.hasPassedFirstStage=!1,i.tokenize=t,"def"):(i.tokenize=t,null)}function o(n,i){for(var u=!1,r;r=n.next();){if(r=="/"&&u){i.tokenize=t;break}u=r=="*"}return"comment"}function b(n){return function(i,r){for(var u=!1,f,e=!1;(f=i.next())!=null;){if(f==n&&!u){e=!0;break}u=!u&&f=="\\"}return(e||!u)&&(r.tokenize=t),"string"}}function k(){var n=r.concat(u);return new RegExp("[\\[\\]]|("+n.join("|")+")$")}var s=/[\^@!\|<>#~\.\*\-\+\\/,=]/,h=/(<-)|(:=)|(=<)|(>=)|(<=)|(<:)|(>:)|(=:)|(\\=)|(\\=:)|(!!)|(==)|(::)/,c=/(:::)|(\.\.\.)|(=<:)|(>=:)/,r=["in","then","else","of","elseof","elsecase","elseif","catch","finally","with","require","prepare","import","export","define","do"],u=["end"],l=i(["true","false","nil","unit"]),a=i(["andthen","at","attr","declare","feat","from","lex","mod","mode","orelse","parser","prod","prop","scanner","self","syn","token"]),v=i(["local","proc","fun","case","class","if","cond","or","dis","choice","not","thread","try","raise","lock","for","suchthat","meth","functor"]),f=i(r),e=i(u);return{startState:function(){return{tokenize:t,currentIndent:0,doInCurrentLine:!1,hasPassedFirstStage:!1}},token:function(n,t){return n.sol()&&(t.doInCurrentLine=0),t.tokenize(n,t)},indent:function(t,i){var r=i.replace(/^\s+|\s+$/g,"");return r.match(e)||r.match(f)||r.match(/(\[])/)?n.indentUnit*(t.currentIndent-1):t.currentIndent<0?0:t.currentIndent*n.indentUnit},fold:"indent",electricInput:k(),lineComment:"%",blockCommentStart:"/*",blockCommentEnd:"*/"}});n.defineMIME("text/x-oz","oz")});
//# sourceMappingURL=oz.min.js.map
