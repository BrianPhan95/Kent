(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("tiddlywiki",function(){function t(n,t,i){return t.tokenize=i,i(n,t)}function n(n,r){var rt=n.sol(),p,w,it;if(r.block=!1,p=n.peek(),rt&&/[<\/\*{}\-]/.test(p)){if(n.match(y))return r.block=!0,t(n,r,u);if(n.match(h))return"quote";if(n.match(o)||n.match(s)||n.match(c)||n.match(l)||n.match(a)||n.match(v))return"comment";if(n.match(e))return"hr"}if(p=n.next(),rt&&/[\/\*!#;:>|]/.test(p)){if(p=="!")return n.skipToEnd(),"header";if(p=="*")return n.eatWhile("*"),"comment";if(p=="#")return n.eatWhile("#"),"comment";if(p==";")return n.eatWhile(";"),"comment";if(p==":")return n.eatWhile(":"),"comment";if(p==">")return n.eatWhile(">"),"quote";if(p=="|")return"header"}if(p=="{"&&n.match(/\{\{/))return t(n,r,u);if(/[hf]/i.test(p)&&/[ti]/i.test(n.peek())&&n.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))return"link";if(p=='"')return"string";if(p=="~")return"brace";if(/[\[\]]/.test(p)&&n.peek()==p)return n.next(),"brace";if(p=="@")return n.eatWhile(f),"link";if(/\d/.test(p))return n.eatWhile(/\d/),"number";if(p=="/"){if(n.eat("%"))return t(n,r,b);if(n.eat("/"))return t(n,r,d)}if(p=="_"&&n.eat("_"))return t(n,r,g);if(p=="-"&&n.eat("-")){if(n.peek()!=" ")return t(n,r,nt);if(n.peek()==" ")return"brace"}if(p=="'"&&n.eat("'"))return t(n,r,k);if(p=="<"){if(n.eat("<"))return t(n,r,tt)}else return null;return n.eatWhile(/[\w\$_]/),w=n.current(),it=i.propertyIsEnumerable(w)&&i[w],it?it.style:null}function b(t,i){for(var u=!1,r;r=t.next();){if(r=="/"&&u){i.tokenize=n;break}u=r=="%"}return"comment"}function k(t,i){for(var u=!1,r;r=t.next();){if(r=="'"&&u){i.tokenize=n;break}u=r=="'"}return"strong"}function u(t,i){var r=i.block;return r&&t.current()?"comment":!r&&t.match(w)?(i.tokenize=n,"comment"):r&&t.sol()&&t.match(p)?(i.tokenize=n,"comment"):(t.next(),"comment")}function d(t,i){for(var u=!1,r;r=t.next();){if(r=="/"&&u){i.tokenize=n;break}u=r=="/"}return"em"}function g(t,i){for(var u=!1,r;r=t.next();){if(r=="_"&&u){i.tokenize=n;break}u=r=="_"}return"underlined"}function nt(t,i){for(var u=!1,r;r=t.next();){if(r=="-"&&u){i.tokenize=n;break}u=r=="-"}return"strikethrough"}function tt(t,i){var f,u,e;return t.current()=="<<"?"macro":(f=t.next(),!f)?(i.tokenize=n,null):f==">"&&t.peek()==">"?(t.next(),i.tokenize=n,"macro"):(t.eatWhile(/[\w\$_]/),u=t.current(),e=r.propertyIsEnumerable(u)&&r[u],e?(e.style,u):u)}var i={},r=function(){function n(n){return{type:n,style:"macro"}}return{allTags:n("allTags"),closeAll:n("closeAll"),list:n("list"),newJournal:n("newJournal"),newTiddler:n("newTiddler"),permaview:n("permaview"),saveChanges:n("saveChanges"),search:n("search"),slider:n("slider"),tabs:n("tabs"),tag:n("tag"),tagging:n("tagging"),tags:n("tags"),tiddler:n("tiddler"),timeline:n("timeline"),today:n("today"),version:n("version"),option:n("option"),"with":n("with"),filter:n("filter")}}(),f=/[\w_\-]/i,e=/^\-\-\-\-+$/,o=/^\/\*\*\*$/,s=/^\*\*\*\/$/,h=/^<<<$/,c=/^\/\/\{\{\{$/,l=/^\/\/\}\}\}$/,a=/^<!--\{\{\{-->$/,v=/^<!--\}\}\}-->$/,y=/^\{\{\{$/,p=/^\}\}\}$/,w=/.*?\}\}\}/;return{startState:function(){return{tokenize:n,indented:0,level:0}},token:function(n,t){if(n.eatSpace())return null;return t.tokenize(n,t)},electricChars:""}});n.defineMIME("text/x-tiddlywiki","tiddlywiki")});
//# sourceMappingURL=tiddlywiki.min.js.map
