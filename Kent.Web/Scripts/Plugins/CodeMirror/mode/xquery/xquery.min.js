(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("xquery",function(){function r(n,t,i){return t.tokenize=i,i(n,t)}function t(t,u){var e=t.next(),nt=!1,d=k(t),tt,g,it,s,rt,b;if(e=="<"){if(t.match("!--",!0))return r(t,u,v);if(t.match("![CDATA",!1))return u.tokenize=y,"tag";if(t.match("?",!1))return r(t,u,p);for(tt=t.eat("/"),t.eatSpace(),g="";it=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)g+=it;return r(t,u,a(g,tt))}if(e=="{")return i(u,{type:"codeblock"}),null;if(e=="}")return n(u),null;if(h(u))return e==">"?"tag":e=="/"&&t.eat(">")?(n(u),"tag"):"variable";if(/\d/.test(e))return t.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/),"atom";if(e==="("&&t.eat(":"))return i(u,{type:"comment"}),r(t,u,c);if(d||e!=='"'&&e!=="'"){if(e==="$")return r(t,u,l);if(e===":"&&t.eat("="))return"keyword";if(e==="(")return i(u,{type:"paren"}),null;if(e===")")return n(u),null;if(e==="[")return i(u,{type:"bracket"}),null;if(e==="]")return n(u),null;if(s=f.propertyIsEnumerable(e)&&f[e],d&&e==='"')while(t.next()!=='"');if(d&&e==="'")while(t.next()!=="'");return(s||t.eatWhile(/[\w\$_-]/),rt=t.eat(":"),!t.eat(":")&&rt&&t.eatWhile(/[\w\$_-]/),t.match(/^[ \t]*\(/,!1)&&(nt=!0),b=t.current(),s=f.propertyIsEnumerable(b)&&f[b],nt&&!s&&(s={type:"function_call",style:"variable def"}),w(u))?(n(u),"variable"):((b=="element"||b=="attribute"||s.type=="axis_specifier")&&i(u,{type:"xmlconstructor"}),s?s.style:"variable")}return r(t,u,o(e))}function c(t,i){for(var f=!1,e=!1,u=0,r;r=t.next();){if(r==")"&&f)if(u>0)u--;else{n(i);break}else r==":"&&e&&u++;f=r==":";e=r=="("}return"comment"}function o(r,f){return function(e,s){var h;if(b(s)&&e.current()==r)return n(s),f&&(s.tokenize=f),"string";if(i(s,{type:"string",name:r,tokenize:o(r,f)}),e.match("{",!1)&&u(s))return s.tokenize=t,"string";while(h=e.next())if(h==r){n(s);f&&(s.tokenize=f);break}else if(e.match("{",!1)&&u(s))return s.tokenize=t,"string";return"string"}}function l(n,i){var r=/[\w\$_-]/;if(n.eat('"')){while(n.next()!=='"');n.eat(":")}else n.eatWhile(r),n.match(":=",!1)||n.eat(":");return n.eatWhile(r),i.tokenize=t,"variable"}function a(r,u){return function(f,e){if(f.eatSpace(),u&&f.eat(">"))return n(e),e.tokenize=t,"tag";if(f.eat("/")||i(e,{type:"tag",name:r,tokenize:t}),f.eat(">"))e.tokenize=t;else return e.tokenize=s,"tag";return"tag"}}function s(f,e){var c=f.next();return c=="/"&&f.eat(">")?(u(e)&&n(e),h(e)&&n(e),"tag"):c==">"?(u(e)&&n(e),"tag"):c=="="?null:c=='"'||c=="'"?r(f,e,o(c,s)):(u(e)||i(e,{type:"attribute",tokenize:s}),f.eat(/[a-zA-Z_:]/),f.eatWhile(/[-a-zA-Z0-9_:.]/),f.eatSpace(),(f.match(">",!1)||f.match("/",!1))&&(n(e),e.tokenize=t),"attribute")}function v(n,i){for(var r;r=n.next();)if(r=="-"&&n.match("->",!0))return i.tokenize=t,"comment"}function y(n,i){for(var r;r=n.next();)if(r=="]"&&n.match("]",!0))return i.tokenize=t,"comment"}function p(n,i){for(var r;r=n.next();)if(r=="?"&&n.match(">",!0))return i.tokenize=t,"comment meta"}function h(n){return e(n,"tag")}function u(n){return e(n,"attribute")}function w(n){return e(n,"xmlconstructor")}function b(n){return e(n,"string")}function k(n){return n.current()==='"'?n.match(/^[^\"]+\"\:/,!1):n.current()==="'"?n.match(/^[^\"]+\'\:/,!1):!1}function e(n,t){return n.stack.length&&n.stack[n.stack.length-1].type==t}function i(n,t){n.stack.push(t)}function n(n){n.stack.pop();var i=n.stack.length&&n.stack[n.stack.length-1].tokenize;n.tokenize=i||t}var f=function(){function r(n){return{type:n,style:"keyword"}}for(var h,c,l,e=r("keyword a"),u=r("keyword b"),t=r("keyword c"),a=r("operator"),o={type:"atom",style:"atom"},v={type:"axis_specifier",style:"qualifier"},f={"if":e,"switch":e,"while":e,"for":e,"else":u,then:u,"try":u,"finally":u,"catch":u,element:t,attribute:t,"let":t,"implements":t,"import":t,module:t,namespace:t,"return":t,"super":t,"this":t,throws:t,where:t,"private":t,",":{type:"punctuation",style:null},"null":o,"fn:false()":o,"fn:true()":o},s=["after","ancestor","ancestor-or-self","and","as","ascending","assert","attribute","before","by","case","cast","child","comment","declare","default","define","descendant","descendant-or-self","descending","document","document-node","element","else","eq","every","except","external","following","following-sibling","follows","for","function","if","import","in","instance","intersect","item","let","module","namespace","node","node","of","only","or","order","parent","precedes","preceding","preceding-sibling","processing-instruction","ref","return","returns","satisfies","schema","schema-element","self","some","sortby","stable","text","then","to","treat","typeswitch","union","variable","version","where","xquery","empty-sequence"],n=0,i=s.length;n<i;n++)f[s[n]]=r(s[n]);for(h=["xs:string","xs:float","xs:decimal","xs:double","xs:integer","xs:boolean","xs:date","xs:dateTime","xs:time","xs:duration","xs:dayTimeDuration","xs:time","xs:yearMonthDuration","numeric","xs:hexBinary","xs:base64Binary","xs:anyURI","xs:QName","xs:byte","xs:boolean","xs:anyURI","xf:yearMonthDuration"],n=0,i=h.length;n<i;n++)f[h[n]]=o;for(c=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"],n=0,i=c.length;n<i;n++)f[c[n]]=a;for(l=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"],n=0,i=l.length;n<i;n++)f[l[n]]=v;return f}();return{startState:function(){return{tokenize:t,cc:[],stack:[]}},token:function(n,t){if(n.eatSpace())return null;return t.tokenize(n,t)},blockCommentStart:"(:",blockCommentEnd:":)"}});n.defineMIME("application/xquery","xquery")});
//# sourceMappingURL=xquery.min.js.map
