(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("coffeescript",function(n,t){function r(n){return new RegExp("^(("+n.join(")|(")+"))\\b")}function i(n,t){var u,e,d,i,r;if(n.sol()){if(t.scope.align===null&&(t.scope.align=!1),u=t.scope.offset,n.eatSpace())return(e=n.indentation(),e>u&&t.scope.type=="coffee")?"indent":e<u?"dedent":null;u>0&&o(n,t)}if(n.eatSpace())return null;if(d=n.peek(),n.match("####"))return n.skipToEnd(),"comment";if(n.match("###"))return t.tokenize=k,t.tokenize(n,t);if(d==="#")return n.skipToEnd(),"comment";if(n.match(/^-?[0-9\.]/,!1)){if(i=!1,n.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),n.match(/^-?\d+\.\d*/)&&(i=!0),n.match(/^-?\.\d+/)&&(i=!0),i)return n.peek()=="."&&n.backUp(1),"number";if(r=!1,n.match(/^-?0x[0-9a-f]+/i)&&(r=!0),n.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(r=!0),n.match(/^-?0(?![\dx])/i)&&(r=!0),r)return"number"}if(n.match(p))return t.tokenize=h(n.current(),!1,"string"),t.tokenize(n,t);if(n.match(w)){if(n.current()!="/"||n.match(/^.*\//,!1))return t.tokenize=h(n.current(),!0,"string-2"),t.tokenize(n,t);n.backUp(1)}return n.match(c)||n.match(v)?"operator":n.match(l)?"punctuation":n.match(b)?"atom":n.match(a)||t.prop&&n.match(s)?"property":n.match(y)?"keyword":n.match(s)?"variable":(n.next(),f)}function h(n,r,u){return function(e,o){while(!e.eol())if(e.eatWhile(/[^'"\/\\]/),e.eat("\\")){if(e.next(),r&&e.eol())return u}else{if(e.match(n))return o.tokenize=i,u;e.eat(/['"\/]/)}return r&&(t.singleLineStringErrors?u=f:o.tokenize=i),u}}function k(n,t){while(!n.eol()){if(n.eatWhile(/[^#]/),n.match("###")){t.tokenize=i;break}n.eatWhile("#")}return"comment"}function e(t,i,r){var u;r=r||"coffee";var f=0,e=!1,o=null;for(u=i.scope;u;u=u.prev)if(u.type==="coffee"||u.type=="}"){f=u.offset+n.indentUnit;break}r!=="coffee"?(e=null,o=t.column()+t.current().length):i.scope.align&&(i.scope.align=!1);i.scope={offset:f,type:r,prev:i.scope,align:e,alignOffset:o}}function o(n,t){var r,u,i;if(t.scope.prev){if(t.scope.type==="coffee"){for(r=n.indentation(),u=!1,i=t.scope;i;i=i.prev)if(r===i.offset){u=!0;break}if(!u)return!0;while(t.scope.prev&&t.scope.offset!==r)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}}function d(n,t){var s=t.tokenize(n,t),i=n.current(),r;if(i==="return"&&(t.dedent=!0),((i==="->"||i==="=>")&&n.eol()||s==="indent")&&e(n,t),r="[({".indexOf(i),r!==-1&&e(n,t,"])}".slice(r,r+1)),u.exec(i)&&e(n,t),i=="then"&&o(n,t),s==="dedent"&&o(n,t))return f;if(r="])}".indexOf(i),r!==-1){while(t.scope.type=="coffee"&&t.scope.prev)t.scope=t.scope.prev;t.scope.type==i&&(t.scope=t.scope.prev)}return t.dedent&&n.eol()&&(t.scope.type=="coffee"&&t.scope.prev&&(t.scope=t.scope.prev),t.dedent=!1),s}var f="error",c=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,l=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,s=/^[_A-Za-z$][_A-Za-z$0-9]*/,a=/^@[_A-Za-z$][_A-Za-z$0-9]*/,v=r(["and","or","not","is","isnt","in","instanceof","typeof"]),u=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],y=r(u.concat(["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"]));u=r(u);var p=/^('{3}|\"{3}|['\"])/,w=/^(\/{3}|\/)/,b=r(["Infinity","NaN","undefined","null","true","false","on","off","yes","no"]);return{startState:function(n){return{tokenize:i,scope:{offset:n||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(n,t){var r=t.scope.align===null&&t.scope,i;return r&&n.sol()&&(r.align=!1),i=d(n,t),i&&i!="comment"&&(r&&(r.align=!0),t.prop=i=="punctuation"&&n.current()=="."),i},indent:function(n,t){var r,u,f;if(n.tokenize!=i)return 0;if(r=n.scope,u=t&&"])}".indexOf(t.charAt(0))>-1,u)while(r.type=="coffee"&&r.prev)r=r.prev;return f=u&&r.type===t.charAt(0),r.align?r.alignOffset-(f?1:0):(f?r.prev:r).offset},lineComment:"#",fold:"indent"}});n.defineMIME("text/x-coffeescript","coffeescript");n.defineMIME("text/coffeescript","coffeescript")});
//# sourceMappingURL=coffeescript.min.js.map
