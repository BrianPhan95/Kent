function handleLinkChange(n){n.getValue().length>0?n.getDialog().getContentElement("youtubePlugin","txtEmbed").disable():n.getDialog().getContentElement("youtubePlugin","txtEmbed").enable()}function handleEmbedChange(n){n.getValue().length>0?n.getDialog().getContentElement("youtubePlugin","txtUrl").disable():n.getDialog().getContentElement("youtubePlugin","txtUrl").enable()}function ytVidId(n){return n.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)?RegExp.$1:!1}function hmsToSeconds(n){for(var t=n.split(":"),i=0,r=1;t.length>0;)i+=r*parseInt(t.pop(),10),r*=60;return i}(function(){CKEDITOR.plugins.add("youtube",{lang:["en","pt","ja","hu","it","fr","tr","ru","de","ar","nl","pl","vi","zh","el","he","es","nb","nn","fi"],init:function(n){n.addCommand("youtube",new CKEDITOR.dialogCommand("youtube",{allowedContent:"iframe[!width,!height,!src,!frameborder,!allowfullscreen]; object param[*]"}));n.ui.addButton("Youtube",{label:n.lang.youtube.button,toolbar:"insert",command:"youtube",icon:this.path+"images/icon.png"});CKEDITOR.dialog.add("youtube",function(){var t;return{title:n.lang.youtube.title,minWidth:500,minHeight:200,contents:[{id:"youtubePlugin",expand:!0,elements:[{id:"txtEmbed",type:"textarea",label:n.lang.youtube.txtEmbed,autofocus:"autofocus",onChange:function(n){handleEmbedChange(this,n)},onKeyUp:function(n){handleEmbedChange(this,n)},validate:function(){if(this.isEnabled())if(this.getValue()){if(this.getValue().length===0||this.getValue().indexOf("//")===-1)return alert(n.lang.youtube.invalidEmbed),!1}else return alert(n.lang.youtube.noCode),!1}},{type:"html",html:n.lang.youtube.or+"<hr>"},{type:"hbox",widths:["70%","15%","15%"],children:[{id:"txtUrl",type:"text",label:n.lang.youtube.txtUrl,onChange:function(n){handleLinkChange(this,n)},onKeyUp:function(n){handleLinkChange(this,n)},validate:function(){if(this.isEnabled())if(this.getValue()){if(t=ytVidId(this.getValue()),this.getValue().length===0||t===!1)return alert(n.lang.youtube.invalidUrl),!1}else return alert(n.lang.youtube.noCode),!1}},{type:"text",id:"txtWidth",width:"60px",label:n.lang.youtube.txtWidth,"default":n.config.youtube_width!=null?n.config.youtube_width:"640",validate:function(){if(this.getValue()){var t=parseInt(this.getValue())||0;if(t===0)return alert(n.lang.youtube.invalidWidth),!1}else return alert(n.lang.youtube.noWidth),!1}},{type:"text",id:"txtHeight",width:"60px",label:n.lang.youtube.txtHeight,"default":n.config.youtube_height!=null?n.config.youtube_height:"360",validate:function(){if(this.getValue()){var t=parseInt(this.getValue())||0;if(t===0)return alert(n.lang.youtube.invalidHeight),!1}else return alert(n.lang.youtube.noHeight),!1}}]},{type:"hbox",widths:["100%"],children:[{id:"chkResponsive",type:"checkbox",label:n.lang.youtube.txtResponsive,"default":n.config.youtube_responsive!=null?n.config.youtube_responsive:!1}]},{type:"hbox",widths:["55%","45%"],children:[{id:"chkRelated",type:"checkbox","default":n.config.youtube_related!=null?n.config.youtube_related:!0,label:n.lang.youtube.chkRelated},{id:"chkOlderCode",type:"checkbox","default":n.config.youtube_older!=null?n.config.youtube_older:!1,label:n.lang.youtube.chkOlderCode}]},{type:"hbox",widths:["55%","45%"],children:[{id:"chkPrivacy",type:"checkbox",label:n.lang.youtube.chkPrivacy,"default":n.config.youtube_privacy!=null?n.config.youtube_privacy:!1},{id:"chkAutoplay",type:"checkbox","default":n.config.youtube_autoplay!=null?n.config.youtube_autoplay:!1,label:n.lang.youtube.chkAutoplay}]},{type:"hbox",widths:["55%","45%"],children:[{id:"txtStartAt",type:"text",label:n.lang.youtube.txtStartAt,validate:function(){if(this.getValue()){var t=this.getValue();if(!/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/i.test(t))return alert(n.lang.youtube.invalidTime),!1}}},{id:"empty",type:"html",html:""}]}]}],onOk:function(){var n="",u="",s,h,c;if(this.getContentElement("youtubePlugin","txtEmbed").isEnabled())n=this.getValueOf("youtubePlugin","txtEmbed");else{var i="//",r=[],f,e=this.getValueOf("youtubePlugin","txtWidth"),o=this.getValueOf("youtubePlugin","txtHeight");i+=this.getContentElement("youtubePlugin","chkPrivacy").getValue()===!0?"www.youtube-nocookie.com/":"www.youtube.com/";i+="embed/"+t;this.getContentElement("youtubePlugin","chkRelated").getValue()===!1&&r.push("rel=0");this.getContentElement("youtubePlugin","chkAutoplay").getValue()===!0&&r.push("autoplay=1");f=this.getValueOf("youtubePlugin","txtStartAt");f&&(s=hmsToSeconds(f),r.push("start="+s));r.length>0&&(i=i+"?"+r.join("&"));this.getContentElement("youtubePlugin","chkResponsive").getValue()===!0&&(n+='<div style="position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden;">',u='style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;"');this.getContentElement("youtubePlugin","chkOlderCode").getValue()===!0?(i=i.replace("embed/","v/"),i=i.replace(/&/g,"&amp;"),i+=i.indexOf("?")===-1?"?":"&amp;",i+="hl="+(this.getParentEditor().config.language?this.getParentEditor().config.language:"en")+"&amp;version=3",n+='<object width="'+e+'" height="'+o+'" '+u+">",n+='<param name="movie" value="'+i+'"><\/param>',n+='<param name="allowFullScreen" value="true"><\/param>',n+='<param name="allowscriptaccess" value="always"><\/param>',n+='<embed src="'+i+'" type="application/x-shockwave-flash" ',n+='width="'+e+'" height="'+o+'" '+u+' allowscriptaccess="always" ',n+='allowfullscreen="true"><\/embed>',n+="<\/object>"):(n+='<iframe width="'+e+'" height="'+o+'" src="'+i+'" '+u,n+='frameborder="0" allowfullscreen><\/iframe>');this.getContentElement("youtubePlugin","chkResponsive").getValue()===!0&&(n+="<\/div>")}h=CKEDITOR.dom.element.createFromHtml(n);c=this.getParentEditor();c.insertElement(h)}}})}})})();
//# sourceMappingURL=plugin.min.js.map
