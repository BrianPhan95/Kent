var qq=qq||{};qq.extend=function(n,t){for(var i in t)n[i]=t[i]};qq.indexOf=function(n,t,i){if(n.indexOf)return n.indexOf(t,i);i=i||0;var r=n.length;for(i<0&&(i+=r);i<r;i++)if(i in n&&n[i]===t)return i;return-1};qq.getUniqueId=function(){var n=0;return function(){return n++}}();qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!=-1};qq.safari=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Apple")!=-1};qq.chrome=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Google")!=-1};qq.firefox=function(){return navigator.userAgent.indexOf("Mozilla")!=-1&&navigator.vendor!=undefined&&navigator.vendor==""};qq.windows=function(){return navigator.platform=="Win32"};qq.attach=function(n,t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i),function(){qq.detach(n,t,i)}};qq.detach=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.attachEvent&&n.detachEvent("on"+t,i)};qq.preventDefault=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1};qq.insertBefore=function(n,t){t.parentNode.insertBefore(n,t)};qq.remove=function(n){n.parentNode.removeChild(n)};qq.contains=function(n,t){return n==t?!0:n.contains?n.contains(t):!!(t.compareDocumentPosition(n)&8)};qq.toElement=function(){var n=document.createElement("div");return function(t){n.innerHTML=t;var i=n.firstChild;return n.removeChild(i),i}}();qq.css=function(n,t){t.opacity!=null&&typeof t.opacity!="undefined"&&typeof n.style.opacity!="string"&&typeof n.filters!="undefined"&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")");qq.extend(n.style,t)};qq.hasClass=function(n,t){var i=new RegExp("(^| )"+t+"( |$)");return i.test(n.className)};qq.addClass=function(n,t){qq.hasClass(n,t)||(n.className+=" "+t)};qq.removeClass=function(n,t){var i=new RegExp("(^| )"+t+"( |$)");n.className=n.className.replace(i," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(n,t){n.innerText=t;n.textContent=t};qq.children=function(n){for(var i=[],t=n.firstChild;t;)t.nodeType==1&&i.push(t),t=t.nextSibling;return i};qq.getByClass=function(n,t){var i;if(n.querySelectorAll)return n.querySelectorAll("."+t);var u=[],r=n.getElementsByTagName("*"),f=r.length;for(i=0;i<f;i++)qq.hasClass(r[i],t)&&u.push(r[i]);return u};qq.obj2url=function(n,t,i){var u=[],f="&",e=function(n,i){var r=t?/\[\]$/.test(t)?t:t+"["+i+"]":i;r!="undefined"&&i!="undefined"&&u.push(typeof n=="object"?qq.obj2url(n,r,!0):Object.prototype.toString.call(n)==="[object Function]"?encodeURIComponent(r)+"="+encodeURIComponent(n()):encodeURIComponent(r)+"="+encodeURIComponent(n))},o,r;if(!i&&t)f=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",u.push(t),u.push(qq.obj2url(n));else if(Object.prototype.toString.call(n)==="[object Array]"&&typeof n!="undefined")for(r=0,o=n.length;r<o;++r)e(n[r],r);else if(typeof n!="undefined"&&n!==null&&typeof n=="object")for(r in n)e(n[r],r);else u.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return u.join(f).replace(/^&/,"").replace(/%20/g,"+")};qq=qq||{};qq.FileUploaderBasic=function(n){this._options={debug:!1,action:"/server/upload",params:{},customHeaders:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],acceptFiles:null,sizeLimit:0,minSizeLimit:0,abortOnFailure:!0,onSubmit:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onError:function(){},messages:{typeError:"Unfortunately the file(s) you selected weren't the type we were expecting. Only {extensions} files are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(n){alert(n)},inputName:"qqfile",extraDropzones:[]};qq.extend(this._options,n);qq.extend(this,qq.DisposeSupport);this._filesInProgress=0;this._handler=this._createUploadHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._preventLeaveInProgress()};qq.FileUploaderBasic.prototype={setParams:function(n){this._options.params=n},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(n){var i=this,t=new qq.UploadButton({element:n,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.acceptFiles,onChange:function(n){i._onInputChange(n)},inputLabeledBy:$(this._options.element).attr("input-labeled-by")});return this.addDisposer(function(){t.dispose()}),t},_createUploadHandler:function(){var n=this,t;return t=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[t]({debug:this._options.debug,action:this._options.action,encoding:this._options.encoding,maxConnections:this._options.maxConnections,customHeaders:this._options.customHeaders,inputName:this._options.inputName,extraDropzones:this._options.extraDropzones,onProgress:function(t,i,r,u){n._onProgress(t,i,r,u);n._options.onProgress(t,i,r,u)},onComplete:function(t,i,r){n._onComplete(t,i,r);n._options.onComplete(t,i,r)},onCancel:function(t,i){n._onCancel(t,i);n._options.onCancel(t,i)},onError:n._options.onError,onUpload:function(t,i,r){n._onUpload(t,i,r);n._options.onUpload(t,i,r)}})},_preventLeaveInProgress:function(){var n=this;this._attach(window,"beforeunload",function(t){if(n._filesInProgress){var t=t||window.event;return t.returnValue=n._options.messages.onLeave,n._options.messages.onLeave}})},_onSubmit:function(){this._filesInProgress++},_onProgress:function(){},_onComplete:function(n,t,i){this._filesInProgress--;i.error&&this._options.showMessage(i.error)},_onCancel:function(){this._filesInProgress--},_onUpload:function(){},_onInputChange:function(n){(!this._options.onInputChange||this._options.onInputChange(n))&&(this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(n.files):this._validateFile(n)&&this._uploadFile(n));this._button.reset()},_uploadFileList:function(n){for(var i=[],t=0;t<n.length;t++)if(this._validateFile(n[t]))i.push(n[t]);else if(this._options.abortOnFailure)return;for(t=0;t<i.length;t++)this._uploadFile(i[t])},_uploadFile:function(n){var t=this._handler.add(n),i=this._handler.getName(t);this._options.onSubmit(t,i)!==!1&&(this._onSubmit(t,i),this._handler.upload(t,this._options.params))},_validateFile:function(n){var t,i;if(n.value?t=n.value.replace(/.*(\/|\\)/,""):(t=n.fileName!==null&&n.fileName!==undefined?n.fileName:n.name,i=n.fileSize!==null&&n.fileSize!==undefined?n.fileSize:n.size),this._isAllowedExtension(t)){if(i===0)return this._error("emptyError",t),!1;if(i&&this._options.sizeLimit&&i>this._options.sizeLimit)return this._error("sizeError",t),!1;if(i&&i<this._options.minSizeLimit)return this._error("minSizeError",t),!1}else return this._error("typeError",t),!1;return!0},_error:function(n,t){function i(n,t){r=r.replace(n,t)}var r=this._options.messages[n];i("{file}",this._formatFileName(t));i("{extensions}",this._options.allowedExtensions.join(", "));i("{sizeLimit}",this._formatSize(this._options.sizeLimit));i("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(r)},_formatFileName:function(n){return n.length>33&&(n=n.slice(0,19)+"..."+n.slice(-13)),n},_isAllowedExtension:function(n){var r=-1!==n.indexOf(".")?n.replace(/.*[.]/,"").toLowerCase():"",i=this._options.allowedExtensions,t;if(!i.length)return!0;for(t=0;t<i.length;t++)if(i[t].toLowerCase()==r)return!0;return!1},_formatSize:function(n){var t=-1;do n=n/1024,t++;while(n>99);return Math.max(n,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}};qq.FileUploader=function(n){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragText:"Drop files here to upload",uploadButtonText:"Upload a file",cancelButtonText:"Cancel",failUploadText:"Upload failed",hideShowDropArea:!0,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>{dragText}<\/span><\/div><div class="qq-upload-button">{uploadButtonText}<\/div><ul class="qq-upload-list"><\/ul><\/div>',fileTemplate:'<li><span class="qq-progress-bar"><\/span><span class="qq-upload-file"><\/span><span class="qq-upload-spinner"><\/span><span class="qq-upload-size"><\/span><a class="qq-upload-cancel" href="#">{cancelButtonText}<\/a><span class="qq-upload-failed-text">{failUploadtext}<\/span><\/li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"},dragAndDropFile:!0,removeDragTemplate:'<div class="qq-uploader"><div class="qq-upload-button">{uploadButtonText}<\/div><ul class="qq-upload-list"><\/ul><\/div>',checkLeavingDocument:null});qq.extend(this._options,n);this._options.dragAndDropFile?(this._options.template=this._options.template.replace(/\{dragText\}/g,this._options.dragText),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.uploadButtonText)):this._options.removeDragTemplate=this._options.removeDragTemplate.replace(/\{uploadButtonText\}/g,this._options.uploadButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.cancelButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{failUploadtext\}/g,this._options.failUploadText);this._element=this._options.element;this._element.innerHTML=this._options.dragAndDropFile?this._options.template:this._options.removeDragTemplate;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{addExtraDropzone:function(n){this._setupExtraDropzone(n)},removeExtraDropzone:function(n){var t=this._options.extraDropzones;for(var i in t)if(t[i]===n)return this._options.extraDropzones.splice(i,1)},_leaving_document_out:function(n){return(qq.chrome()||qq.safari()&&qq.windows())&&n.clientX==0&&n.clientY==0||qq.firefox()&&!n.relatedTarget},_find:function(n,t){var i=qq.getByClass(n,this._options.classes[t])[0];if(!i)throw new Error("element not found "+t);return i},_setupExtraDropzone:function(n){this._options.extraDropzones.push(n);this._setupDropzone(n)},_setupDropzone:function(n){var t=this,i=new qq.UploadDropZone({element:n,onEnter:function(i){qq.addClass(n,t._classes.dropActive);i.stopPropagation()},onLeave:function(){},onLeaveNotDescendants:function(){qq.removeClass(n,t._classes.dropActive)},onDrop:function(i){t._options.hideShowDropArea&&(n.style.display="none");qq.removeClass(n,t._classes.dropActive);t._uploadFileList(i.dataTransfer.files)}});this._dropZone=i;this.addDisposer(function(){i.dispose()});this._options.hideShowDropArea&&(n.style.display="none")},_setupDragDrop:function(){var r,i,t,n;if(this._options.dragAndDropFile){for(r=this._find(this._element,"drop"),i=this,this._options.extraDropzones.push(r),t=this._options.extraDropzones,n=0;n<t.length;n++)this._setupDropzone(t[n]);qq.ie()||this._attach(document,"dragenter",function(u){if(i._dropZone._isValidFileDrag(u)&&!qq.hasClass(r,i._classes.dropDisabled))for(r.style.display="block",n=0;n<t.length;n++)t[n].style.display="block"});this._attach(document,"dragleave",function(r){if(i._options.checkLeavingDocument!=undefined&&i._options.checkLeavingDocument!=null&&typeof i._options.checkLeavingDocument=="function"){if(i._options.hideShowDropArea&&i._options.checkLeavingDocument(r))for(n=0;n<t.length;n++)t[n].style.display="none"}else{var u=document.elementFromPoint(r.clientX,r.clientY);if(i._options.hideShowDropArea&&qq.FileUploader.prototype._leaving_document_out(r))for(n=0;n<t.length;n++)t[n].style.display="none"}});qq.attach(document,"drop",function(r){if(i._options.hideShowDropArea)for(n=0;n<t.length;n++)t[n].style.display="none";r.preventDefault()})}},_onSubmit:function(n,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(n,t)},_onProgress:function(n,t,i,r){var u,f,o,e;qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);u=this._getItemByFileId(n);f=this._find(u,"size");f.style.display="inline";e=Math.round(i/r*100);o=i!=r?e+"% from "+this._formatSize(r):this._formatSize(r);this._find(u,"progressBar").style.width=e+"%";qq.setText(f,o)},_onComplete:function(n,t,i){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var r=this._getItemByFileId(n);qq.remove(this._find(r,"cancel"));qq.remove(this._find(r,"spinner"));i.success?qq.addClass(r,this._classes.success):qq.addClass(r,this._classes.fail)},_addToList:function(n,t){var i=qq.toElement(this._options.fileTemplate),r;i.qqFileId=n;r=this._find(i,"file");qq.setText(r,this._formatFileName(t));this._find(i,"size").style.display="none";this._options.multiple||this._clearList();this._listElement.appendChild(i)},_clearList:function(){this._listElement.innerHTML=""},_getItemByFileId:function(n){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==n)return t;t=t.nextSibling}},_bindCancelEvent:function(){var n=this,t=this._listElement;this._attach(t,"click",function(t){var i,r,u;t=t||window.event;i=t.target||t.srcElement;qq.hasClass(i,n._classes.cancel)&&(qq.preventDefault(t),r=i.parentNode,n._handler.cancel(r.qqFileId),qq.remove(r),u=i.parentNode.closest(".qq-upload-drop-area"),console.log(u),u.hide())})}});qq.UploadDropZone=function(n){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(this._options,n);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(){qq.UploadDropZone.dropOutsideDisabled||(this._dragover_should_be_canceled?qq.attach(document,"dragover",function(n){n.preventDefault()}):qq.attach(document,"dragover",function(n){n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var n=this;n._attach(n._element,"dragover",function(t){if(n._isValidFileDrag(t)){var i=qq.ie()?null:t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect=i=="move"||i=="linkMove"?"move":"copy";t.stopPropagation();t.preventDefault()}});n._attach(n._element,"dragenter",function(t){if(n._isValidFileDrag(t))n._options.onEnter(t)});n._attach(n._element,"dragleave",function(t){if(n._isValidFileDrag(t)){n._options.onLeave(t);var i=document.elementFromPoint(t.clientX,t.clientY);if(!qq.contains(this,i))n._options.onLeaveNotDescendants(t)}});n._attach(n._element,"drop",function(t){if(n._isValidFileDrag(t)){t.preventDefault();n._options.onDrop(t)}})},_isValidFileDrag:function(n){if(qq.ie())return!1;var t=n.dataTransfer,i=qq.safari();return t&&t.effectAllowed!="none"&&(t.files||!i&&t.types.contains&&t.types.contains("Files"))}};qq.UploadButton=function(n){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,n);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var n=document.createElement("input"),t;return this._options.multiple&&n.setAttribute("multiple","multiple"),this._options.acceptFiles&&n.setAttribute("accept",this._options.acceptFiles),n.setAttribute("type","file"),n.setAttribute("name",this._options.name),this._options.inputLabeledBy&&n.setAttribute("aria-labelledby",this._options.inputLabeledBy),qq.css(n,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(n),t=this,this._attach(n,"change",function(){t._options.onChange(n)}),this._attach(n,"mouseover",function(){qq.addClass(t._element,t._options.hoverClass)}),this._attach(n,"mouseout",function(){qq.removeClass(t._element,t._options.hoverClass)}),this._attach(n,"focus",function(){qq.addClass(t._element,t._options.focusClass)}),this._attach(n,"blur",function(){qq.removeClass(t._element,t._options.focusClass)}),window.attachEvent&&n.setAttribute("tabIndex","-1"),n}};qq.UploadHandlerAbstract=function(n){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){}};qq.extend(this._options,n);this._queue=[];this._params=[]};qq.UploadHandlerAbstract.prototype={log:function(n){this._options.debug&&window.console&&console.log("[uploader] "+n)},add:function(){},upload:function(n,t){var r=this._queue.push(n),i={};qq.extend(i,t);this._params[n]=i;r<=this._options.maxConnections&&this._upload(n,this._params[n])},cancel:function(n){this._cancel(n);this._dequeue(n)},cancelAll:function(){for(var n=0;n<this._queue.length;n++)this._cancel(this._queue[n]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},_upload:function(){},_cancel:function(){},_dequeue:function(n){var r=qq.indexOf(this._queue,n),t,i;this._queue.splice(r,1);t=this._options.maxConnections;this._queue.length>=t&&r<t&&(i=this._queue[t-1],this._upload(i,this._params[i]))}};qq.UploadHandlerForm=function(){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{_detach_event:{},add:function(n){n.setAttribute("name",this._options.inputName);var t="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[t]=n,n.parentNode&&qq.remove(n),t},getName:function(n){return this._inputs[n].value.replace(/.*(\/|\\)/,"")},_cancel:function(n){this._options.onCancel(n,this.getName(n));delete this._inputs[n];var t=document.getElementById(n);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(n,t){var u,i;this._options.onUpload(n,this.getName(n),!1);if(u=this._inputs[n],!u)throw new Error("file with passed id was not added, or already uploaded or cancelled");var e=this.getName(n),r=this._createIframe(n),f=this._createForm(r,t);return f.appendChild(u),i=this,this._attachLoadEvent(r,function(){i.log("iframe loaded");var t=i._getIframeContentJSON(r);i._options.onComplete(n,e,t);i._dequeue(n);delete i._inputs[n];setTimeout(function(){i._detach_event[r.id]();delete i._detach_event[r.id];qq.remove(r)},1)}),f.submit(),qq.remove(f),n},_attachLoadEvent:function(n,t){this._detach_event[n.id]=qq.attach(n,"load",function(){n.parentNode&&(n.contentDocument&&n.contentDocument.body&&n.contentDocument.body.innerHTML=="false"||t())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response,innerHTML=doc.body.innerHTML;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+innerHTML);innerHTML.slice(0,5).toLowerCase()=="<pre>"&&innerHTML.slice(-6).toLowerCase()=="<\/pre>"&&(innerHTML=doc.body.firstChild.firstChild.nodeValue);try{response=eval("("+innerHTML+")")}catch(err){response={}}return response},_createIframe:function(n){var t=qq.toElement('<iframe src="javascript:false;" name="'+n+'" />');return t.setAttribute("id",n),t.style.display="none",document.body.appendChild(t),t},_createForm:function(n,t){var i=qq.toElement('<form method="post" enctype="multipart/form-data"><\/form>'),r=qq.obj2url(t,this._options.action);return i.setAttribute("action",r),i.setAttribute("target",n.name),i.style.display="none",document.body.appendChild(i),i}});qq.UploadHandlerXhr=function(){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var n=document.createElement("input");return n.type="file","multiple"in n&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(n){if(!(n instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(n)-1},getName:function(n){var t=this._files[n];return t.fileName!==null&&t.fileName!==undefined?t.fileName:t.name},getSize:function(n){var t=this._files[n];return t.fileSize!=null?t.fileSize:t.size},getLoaded:function(n){return this._loaded[n]||0},_upload:function(n,t){var i,u,o,e;this._options.onUpload(n,this.getName(n),!0);var r=this._files[n],f=this.getName(n),s=this.getSize(n);this._loaded[n]=0;i=this._xhrs[n]=new XMLHttpRequest;u=this;i.upload.onprogress=function(t){if(t.lengthComputable){u._loaded[n]=t.loaded;u._options.onProgress(n,f,t.loaded,t.total)}};i.onreadystatechange=function(){i.readyState==4&&u._onComplete(n,i)};t=t||{};t[this._options.inputName]=f;o=qq.obj2url(t,this._options.action);i.open("POST",o,!0);i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.setRequestHeader("X-File-Name",encodeURIComponent(f));this._options.encoding=="multipart"?(e=new FormData,e.append(this._options.inputName,r),r=e):(i.setRequestHeader("Content-Type","application/octet-stream"),i.setRequestHeader("X-Mime-Type",r.type));for(key in this._options.customHeaders)i.setRequestHeader(key,this._options.customHeaders[key]);i.send(r)},_onComplete:function(id,xhr){var name,size,response;if(this._files[id]){name=this.getName(id);size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else{this._options.onError(id,name,xhr);this._options.onComplete(id,name,{})}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)}},_cancel:function(n){this._options.onCancel(n,this.getName(n));this._files[n]=null;this._xhrs[n]&&(this._xhrs[n].abort(),this._xhrs[n]=null)}});qq.DisposeSupport={_disposers:[],dispose:function(){for(var n;n=this._disposers.shift();)n()},addDisposer:function(n){this._disposers.push(n)},_attach:function(){this.addDisposer(qq.attach.apply(this,arguments))}};
//# sourceMappingURL=fileuploader.min.js.map
