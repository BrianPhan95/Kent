var idConst="",accessToken=accessToken||"";gapi.analytics.ready(function(){function e(r,u,f){var e=n({ids:r,metrics:"ga:users",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f}),o=n({ids:r,metrics:"ga:sessions",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f}),s=n({ids:r,metrics:"ga:sessions,ga:users,ga:visits,ga:pageviews,ga:percentNewVisits,ga:entranceBounceRate,ga:exitRate,ga:pageviewsPerVisit,ga:avgPageLoadTime","start-date":u,"end-date":f}),h=n({ids:r,metrics:"ga:pageviews",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f}),c=n({ids:r,metrics:"ga:pageviewsPerVisit",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f}),l=n({ids:r,metrics:"ga:entranceBounceRate",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f}),a=n({ids:r,metrics:"ga:percentNewVisits",dimensions:"ga:date,ga:nthDay","start-date":u,"end-date":f});Promise.all([e,s,o,h,c,l,a]).then(function(n){var g=0,nt=0,tt=0,it=0,rt=0,ut=0,o=0,u=0,ft=n[0].rows.map(function(n){return+n[2]}),s=n[0].rows.map(function(n){return+n[0]}),et=n[2].rows.map(function(n){return+n[2]}),h=n[2].rows.map(function(n){return+n[0]}),ot=n[3].rows.map(function(n){return+n[2]}),c=n[3].rows.map(function(n){return+n[0]}),st=n[4].rows.map(function(n){return+n[2]}),l=n[4].rows.map(function(n){return+n[0]}),ht=n[5].rows.map(function(n){return+n[2]}),a=n[5].rows.map(function(n){return+n[0]}),ct=n[6].rows.map(function(n){return+n[2]}),v=n[6].rows.map(function(n){return+n[0]}),y,p,w,b,k,d,r;if(n[1].rows!=undefined){var f=moment.duration(parseInt(n[1].rows[0][5],10)),e=function(n){return(n<10?"0":"")+Math.floor(n)},lt=e(f.hours())+":"+e(f.minutes())+":"+e(f.seconds())+":"+e(f.milliseconds());g=n[1].rows[0][0];nt=n[1].rows[0][1];tt=Math.round(n[1].rows[0][3]*100)/100;rt=lt;ut=Math.round(n[1].rows[0][6]*100)/100;it=Math.round(n[1].rows[0][8]*100)/100;o=Math.round(n[1].rows[0][4]*100)/100;u=100-Math.round(n[1].rows[0][4]*100)/100}u=Math.round(u);$("#spanSessions").html(g.toString());$("#spanUsers").html(nt.toString());$("#spanPageViews").html(tt.toString());$("#pageSessions").html(it.toString());$("#spanAvgSessionDuration").html(rt.toString());$("#spanBounceRate").html(ut.toString()+"%");$("#spannewsessions").html(o.toString()+"%");s=s.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});h=h.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});c=c.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});a=a.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});v=v.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});l=l.map(function(n){return moment(n,"YYYYMMDD").format("MMM D")});y={labels:s,datasets:[{label:"Users",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:ft}]};new Chart(t("chart-2-container")).Line(y);i("legend-2-container",y.datasets);p={labels:h,datasets:[{label:"Sessions",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:et}]};new Chart(t("chart-4-container")).Line(p);i("legend-4-container",p.datasets);w={labels:c,datasets:[{label:"Page Views",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:ot}]};new Chart(t("chart-6-container")).Line(w);i("legend-6-container",w.datasets);b={labels:l,datasets:[{label:"Pages / Session",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:st}]};new Chart(t("chart-7-container")).Line(b);i("legend-7-container",b.datasets);k={labels:a,datasets:[{label:"Avg. Session Duration",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:ht}]};new Chart(t("chart-8-container")).Line(k);i("legend-8-container",k.datasets);d={labels:v,datasets:[{label:"Bounce Rate",fillColor:"#E5F3F9",strokeColor:"#058DC7",pointColor:"#058DC7",pointStrokeColor:"#fff",data:ct}]};new Chart(t("chart-9-container")).Line(d);i("legend-9-container",d.datasets);r=[];r.push({label:"New Visitor",value:o,color:"#058DC7"});r.push({label:"Returning Visitor",value:u,color:"#50B432"});new Chart(t("chart-3-container")).Pie(r);i("legend-3-container",r)})}function n(n){return new Promise(function(t,i){var r=new gapi.analytics.report.Data({query:n});r.once("success",function(n){t(n)}).once("error",function(n){i(n)}).execute()})}function t(n){var i=document.getElementById(n),t=document.createElement("canvas"),r=t.getContext("2d");return i.innerHTML="",t.width=i.offsetWidth,t.height=200,i.appendChild(t),r}function i(n,t){var i=document.getElementById(n);i.innerHTML=t.map(function(n){var t=n.color||n.fillColor,i=n.label;return'<li><i style="background:'+t+'"><\/i>'+i+"<\/li>"}).join("")}var r,f;gapi.analytics.auth.authorize({container:"embed-api-auth-container",scopes:["https://www.googleapis.com/auth/analytics.manage.users"],serverAuth:{access_token:accessToken}});r=new gapi.analytics.ext.ActiveUsers({container:"active-users-container",pollingInterval:5});r.once("success",function(){var n;this.on("change",function(t){var i=this.container.firstChild,r=t.delta>0?"is-increasing":"is-decreasing";i.className+=" "+r;clearTimeout(n);n=setTimeout(function(){i.className=i.className.replace(/ is-(increasing|decreasing)/g,"")},3e3)})});var o=new gapi.analytics.ext.ViewSelector2({container:"view-selector-container"}).execute(),u=moment();o.on("viewChange",function(n){r.set(n).execute();idConst=n.ids;e(n.ids,moment(u).subtract(7,"day").day(0).format("YYYY-MM-DD"),moment(u).format("YYYY-MM-DD"));$(".ViewSelector2 .FormField").select2()});f=new gapi.analytics.ext.DateRangeSelector({container:"date-range-container"}).set({"start-date":"7daysAgo","end-date":"yesterday"}).execute();$("input[type=date]").datepicker({format:"yyyy-mm-dd",autoclose:!0});f.on("change",function(n){e(idConst,n["start-date"],n["end-date"])});Chart.defaults.global.animationSteps=60;Chart.defaults.global.animationEasing="easeInOutQuart";Chart.defaults.global.responsive=!0;Chart.defaults.global.maintainAspectRatio=!1});
//# sourceMappingURL=googleAnalyticBoard.min.js.map
